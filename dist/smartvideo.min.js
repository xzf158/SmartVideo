!function(){function e(e){t||delete e.muted,window.Enabler&&window.Enabler.getUrl&&(e.mp4=Enabler.getUrl(e.mp4),e.webm&&(e.webm=Enabler.getUrl(e.webm)),e.poster&&(e.poster=Enabler.getUrl(e.poster)));var a=$("<div class='video-holder' />"),n=$("<video "+e.autoplay+" "+e.preload+" "+e.muted+" src='"+e.mp4+"'/>");n.append("<source type='video/mp4' src='"+e.mp4+"'>"),e.webm&&n.append("<source type='video/webm' src='"+e.webm+"'>");var r=$(' <div class="loading"><div class="loader"></div></div>');if(a.append(n),e.container.append(a),a.append(r),e.event)for(var i in e.event)n.on(i,e.event[i]);var d,l=0;n.on("play",function(){d=setInterval(function(){l==n[0].currentTime?n.trigger("loading"):(l=n[0].currentTime,n.trigger("canplay"))},300)}).on("pause",function(){clearInterval(d)}),n[0].mute=function(e){var a=o;return!e&&o&&(o=!1,n[0].currentTime=0,n[0].paused&&n[0].play()),t=e,a};return n}function a(e){window.Enabler&&window.Enabler.getUrl&&(e.mpg=Enabler.getUrl(e.mpg),e.audio&&(e.audio=Enabler.getUrl(e.audio)),e.poster&&(e.poster=Enabler.getUrl(e.poster)));var a,r,i,d,l=$("<div class='video-holder'/>"),p=[25,50,75],c=$(' <div class="loading"><div class="loader"></div></div>');if(window.mobilePlayerCache[e.mpg])i=window.mobilePlayerCache[e.mpg],a=window.canvasCache[e.mpg],i.stop(),i.seekToFrame(0);else{a=$("<canvas style='opacity:0'/>");i=new jsmpeg(window.Enabler?e.mpg.replace(".mpg",".txt"):e.mpg,{canvas:a[0],seekable:!0,repeat:!1,preload:!0,baseOnTime:!0,onload:function(){p=[25,50,75];var n=setInterval(function(){i.pause(),void 0!=r[0].currentTime&&(i.play(),e.event.canplay&&e.event.canplay(),i.canplay=!0,i._muted||r[0].play(),a.css("opacity",1),a.css({width:a.width()-1+"px!important"}),setTimeout(function(){a.css({width:""})},500),clearInterval(n))},50)},onfinished:function(){e.event.ended(),r[0].paused||r[0].pause()}}),i._muted=!0,mobilePlayerCache[e.mpg]=i,canvasCache[e.mpg]=a;var u=i.play,s=i.pause;i.play=function(){p.length&&(p=[25,50,75]),i.paused=!1,i.muted||(r[0].currentTime&&(r[0].currentTime=i.currentTime),r[0].play()),u.call(i),e.event.play&&e.event.play(),clearInterval(d),d=setInterval(function(){if(i.currentTime/i.duration*100>=p[0]){var a=p.shift();n("video",e.videoId+"_"+a+"%_played")}Math.abs(i.currentTime-i.duration)<.1&&clearInterval(d)},100)},i.pause=function(){i.paused=!0,r[0].pause(),s.call(i),e.event.pause&&e.event.pause(),clearInterval(d)}}return l.append(a),e.container.append(l),i.canplay||l.append(c),i.muted=t,audioCache[e.mpg]?(r=audioCache[e.mpg],r.currentTime=0):(r=$("<audio "+e.preload+" src='"+e.audio+"'/>"),audioCache[e.mpg]=r,r[0].muted=!0,r[0].play()),i.audio=r[0],l.append(r),i.mute=function(e){var a=o;return r[0].muted=!1,i.canplay?(e||i.paused?r[0].pause():r[0].play(),!e&&o?(r[0].currentTime&&(r[0].currentTime=0),i.seekToFrame(0)):r[0].currentTime=i.currentTime,t=e,i._muted=e,o=!1,a):(i._muted=e,void(o=!1))},i}function n(e,a){i.trigger("tracking",{category:e,label:a})}var r={create:function(n){var r;return $(".video-holder").empty().remove(),n.mobile?r=a(n):($video=e(n),r=$video[0]),r}},t=!0,i=$(window),o=!0;window.mobilePlayerCache={},window.canvasCache={},window.audioCache={};var i=$(window);window.Video=r}();